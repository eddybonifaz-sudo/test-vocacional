<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Trivia Educativa - Universidad de Otavalo</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Fredoka+One&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #8b5cf6;
            --primary-dark: #7c3aed;
            --primary-light: #c4b5fd;
            --secondary: #f59e0b;
            --accent: #10b981;
            --pink: #ec4899;
            --blue: #3b82f6;
            --bg-gradient-1: #1e1b4b;
            --bg-gradient-2: #4c1d95;
            --bg-gradient-3: #2e1065;
            --card-bg: rgba(255, 255, 255, 0.08);
            --card-border: rgba(255, 255, 255, 0.15);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.7);
            --correct: #10b981;
            --incorrect: #ef4444;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, var(--bg-gradient-1) 0%, var(--bg-gradient-2) 50%, var(--bg-gradient-3) 100%);
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: hidden;
        }

        /* Animated background */
        .bg-animated {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .floating-emoji {
            position: absolute;
            font-size: 2rem;
            opacity: 0.15;
            animation: floatEmoji 15s infinite ease-in-out;
        }

        @keyframes floatEmoji {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-20px) rotate(10deg); }
            50% { transform: translateY(-40px) rotate(-5deg); }
            75% { transform: translateY(-20px) rotate(5deg); }
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
            padding-bottom: 40px;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 25px 0;
            animation: bounceIn 0.8s ease-out;
        }

        @keyframes bounceIn {
            0% { opacity: 0; transform: scale(0.5); }
            50% { transform: scale(1.05); }
            100% { opacity: 1; transform: scale(1); }
        }

        .logo {
            font-family: 'Fredoka One', cursive;
            font-size: 2.5rem;
            background: linear-gradient(135deg, #f59e0b, #ec4899, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 5px;
            text-shadow: 0 4px 30px rgba(245, 158, 11, 0.3);
        }

        .subtitle {
            font-size: 0.95rem;
            color: var(--text-secondary);
            font-weight: 400;
        }

        .game-badge {
            display: inline-block;
            background: linear-gradient(135deg, var(--pink), var(--primary));
            padding: 8px 20px;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-top: 15px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(236, 72, 153, 0.4); }
            50% { box-shadow: 0 0 0 15px rgba(236, 72, 153, 0); }
        }

        /* Sections */
        .section {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Cards */
        .card {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--card-border);
            border-radius: 24px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .card-title .icon {
            width: 45px;
            height: 45px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
        }

        /* Form Inputs */
        .input-group {
            margin-bottom: 18px;
        }

        .input-group label {
            display: block;
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input {
            width: 100%;
            padding: 15px 18px;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid transparent;
            border-radius: 14px;
            color: var(--text-primary);
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.12);
            box-shadow: 0 0 0 4px rgba(139, 92, 246, 0.2);
        }

        .input-group input::placeholder {
            color: rgba(255, 255, 255, 0.3);
        }

        .input-group.error input {
            border-color: var(--incorrect);
        }

        .error-message {
            color: var(--incorrect);
            font-size: 0.8rem;
            margin-top: 6px;
            display: none;
        }

        .input-group.error .error-message {
            display: block;
        }

        /* Consent */
        .consent-container {
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(139, 92, 246, 0.1);
            border-radius: 16px;
            border: 1px solid rgba(139, 92, 246, 0.2);
        }

        .consent-label {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            cursor: pointer;
        }

        .consent-label input[type="checkbox"] {
            width: 22px;
            height: 22px;
            min-width: 22px;
            margin-top: 3px;
            accent-color: var(--primary);
            cursor: pointer;
        }

        .consent-label span {
            font-size: 0.8rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        #consent-error {
            color: var(--incorrect);
            font-size: 0.8rem;
            margin-top: 8px;
            display: none;
        }

        /* Buttons */
        .btn {
            width: 100%;
            padding: 16px 30px;
            border: none;
            border-radius: 16px;
            font-size: 1rem;
            font-weight: 600;
            font-family: 'Poppins', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--pink) 100%);
            color: white;
            box-shadow: 0 10px 30px rgba(245, 158, 11, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(245, 158, 11, 0.4);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        /* Game Area */
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background: var(--card-bg);
            border-radius: 16px;
        }

        .score-display {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .score-display .score-icon {
            font-size: 1.3rem;
        }

        .timer-display {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--secondary);
        }

        .timer-display.warning {
            color: var(--incorrect);
            animation: timerPulse 0.5s infinite;
        }

        @keyframes timerPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .question-counter {
            text-align: center;
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 15px;
        }

        .question-card {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(236, 72, 153, 0.1));
            border: 2px solid rgba(139, 92, 246, 0.3);
            border-radius: 24px;
            padding: 25px;
            margin-bottom: 20px;
            text-align: center;
        }

        .question-category {
            display: inline-block;
            padding: 6px 16px;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .category-basica { background: linear-gradient(135deg, #3b82f6, #1d4ed8); }
        .category-inicial { background: linear-gradient(135deg, #10b981, #059669); }
        .category-psicologia { background: linear-gradient(135deg, #ec4899, #be185d); }

        .question-text {
            font-size: 1.15rem;
            line-height: 1.6;
            font-weight: 500;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option-btn {
            width: 100%;
            padding: 16px 20px;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.15);
            border-radius: 16px;
            color: var(--text-primary);
            font-size: 0.95rem;
            font-family: 'Poppins', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .option-btn:hover:not(.disabled) {
            background: rgba(139, 92, 246, 0.2);
            border-color: var(--primary);
            transform: translateX(5px);
        }

        .option-btn .option-letter {
            width: 32px;
            height: 32px;
            min-width: 32px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.9rem;
        }

        .option-btn.correct {
            background: rgba(16, 185, 129, 0.3);
            border-color: var(--correct);
            animation: correctPop 0.5s ease;
        }

        .option-btn.correct .option-letter {
            background: var(--correct);
        }

        .option-btn.incorrect {
            background: rgba(239, 68, 68, 0.3);
            border-color: var(--incorrect);
            animation: shake 0.5s ease;
        }

        .option-btn.incorrect .option-letter {
            background: var(--incorrect);
        }

        .option-btn.disabled {
            pointer-events: none;
            opacity: 0.6;
        }

        @keyframes correctPop {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            75% { transform: translateX(8px); }
        }

        /* Feedback */
        .feedback {
            text-align: center;
            padding: 15px;
            border-radius: 16px;
            margin-top: 15px;
            font-weight: 600;
            display: none;
        }

        .feedback.correct {
            display: block;
            background: rgba(16, 185, 129, 0.2);
            color: var(--correct);
        }

        .feedback.incorrect {
            display: block;
            background: rgba(239, 68, 68, 0.2);
            color: var(--incorrect);
        }

        /* Results */
        .results-container {
            text-align: center;
        }

        .results-icon {
            font-size: 5rem;
            margin-bottom: 20px;
            animation: bounceIn 0.8s ease-out;
        }

        .results-title {
            font-family: 'Fredoka One', cursive;
            font-size: 2rem;
            margin-bottom: 10px;
            background: linear-gradient(135deg, var(--secondary), var(--pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .results-score {
            font-size: 3.5rem;
            font-weight: 800;
            margin: 20px 0;
            color: var(--secondary);
        }

        .results-message {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 25px 0;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 16px;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-light);
        }

        .stat-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-top: 5px;
        }

        /* Spinner */
        .spinner {
            width: 24px;
            height: 24px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Instructions */
        .instructions {
            background: rgba(245, 158, 11, 0.1);
            border-left: 4px solid var(--secondary);
            padding: 18px;
            border-radius: 0 16px 16px 0;
            margin-bottom: 20px;
        }

        .instructions h3 {
            font-size: 1rem;
            margin-bottom: 12px;
            color: var(--secondary);
        }

        .instructions ul {
            list-style: none;
            padding: 0;
        }

        .instructions li {
            font-size: 0.85rem;
            color: var(--text-secondary);
            padding: 5px 0;
            padding-left: 25px;
            position: relative;
        }

        .instructions li::before {
            content: 'üéØ';
            position: absolute;
            left: 0;
        }

        /* Confetti */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }

        /* Responsive */
        @media (max-width: 400px) {
            .container { padding: 15px; }
            .logo { font-size: 2rem; }
            .question-text { font-size: 1rem; }
            .option-btn { padding: 14px 16px; font-size: 0.9rem; }
        }
    </style>
</head>
<body>
    <div class="bg-animated">
        <span class="floating-emoji" style="top: 10%; left: 10%;">üìö</span>
        <span class="floating-emoji" style="top: 20%; right: 15%; animation-delay: -3s;">üéì</span>
        <span class="floating-emoji" style="top: 50%; left: 5%; animation-delay: -5s;">‚úèÔ∏è</span>
        <span class="floating-emoji" style="top: 70%; right: 10%; animation-delay: -7s;">üß†</span>
        <span class="floating-emoji" style="top: 85%; left: 20%; animation-delay: -9s;">üë∂</span>
        <span class="floating-emoji" style="top: 30%; right: 5%; animation-delay: -11s;">üè´</span>
    </div>

    <canvas id="confetti-canvas"></canvas>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1 class="logo">üéÆ Trivia Educativa</h1>
            <p class="subtitle">Universidad de Otavalo</p>
            <div class="game-badge">‚ö° JUEGO R√ÅPIDO ‚ö°</div>
        </header>

        <!-- Section 1: Student Data -->
        <section id="section-data" class="section active">
            <div class="card">
                <h2 class="card-title">
                    <span class="icon" style="background: linear-gradient(135deg, var(--secondary), var(--pink));">üéØ</span>
                    ¬°Prep√°rate para jugar!
                </h2>
                
                <div class="input-group">
                    <label for="nombres">Nombres completos</label>
                    <input type="text" id="nombres" placeholder="Ingresa tu nombre completo" required>
                    <span class="error-message">Este campo es obligatorio</span>
                </div>

                <div class="input-group">
                    <label for="institucion">Instituci√≥n Educativa</label>
                    <input type="text" id="institucion" placeholder="Nombre de tu colegio" required>
                    <span class="error-message">Este campo es obligatorio</span>
                </div>

                <div class="input-group">
                    <label for="celular">N√∫mero de celular</label>
                    <input type="tel" id="celular" placeholder="Ej: 0991234567" required>
                    <span class="error-message">Ingresa un n√∫mero v√°lido (10 d√≠gitos)</span>
                </div>

                <div class="input-group">
                    <label for="email">Correo electr√≥nico</label>
                    <input type="email" id="email" placeholder="tucorreo@ejemplo.com" required>
                    <span class="error-message">Ingresa un correo v√°lido</span>
                </div>

                <div class="consent-container">
                    <label class="consent-label">
                        <input type="checkbox" id="consentimiento">
                        <span>
                            Autorizo el tratamiento de mis datos personales de acuerdo con la <strong style="color: var(--primary-light);">Ley Org√°nica de Protecci√≥n de Datos Personales</strong>. 
                            Entiendo que mis datos ser√°n utilizados √∫nicamente con fines educativos y de orientaci√≥n vocacional.
                        </span>
                    </label>
                    <span id="consent-error">Debes aceptar el tratamiento de datos para continuar</span>
                </div>

                <button class="btn btn-primary" onclick="startGame()">
                    üöÄ ¬°Empezar a Jugar!
                </button>
            </div>

            <div class="instructions">
                <h3>üéÆ ¬øC√≥mo jugar?</h3>
                <ul>
                    <li>Tienes 3 minutos para responder</li>
                    <li>10 preguntas aleatorias</li>
                    <li>Cada respuesta correcta = 100 puntos</li>
                    <li>¬°Aprende sobre nuestras carreras!</li>
                </ul>
            </div>
        </section>

        <!-- Section 2: Game -->
        <section id="section-game" class="section">
            <div class="game-header">
                <div class="score-display">
                    <span class="score-icon">‚≠ê</span>
                    <span id="score">0</span> pts
                </div>
                <div class="timer-display" id="timer">
                    ‚è±Ô∏è <span id="time">3:00</span>
                </div>
            </div>

            <div class="question-counter">
                Pregunta <span id="currentQ">1</span> de <span id="totalQ">10</span>
            </div>

            <div class="question-card">
                <div class="question-category" id="questionCategory">EDUCACI√ìN B√ÅSICA</div>
                <p class="question-text" id="questionText">Cargando pregunta...</p>
            </div>

            <div class="options-container" id="optionsContainer">
                <!-- Options will be inserted here -->
            </div>

            <div class="feedback" id="feedback"></div>
        </section>

        <!-- Section 3: Results -->
        <section id="section-results" class="section">
            <div class="results-container">
                <div class="results-icon" id="resultsIcon">üèÜ</div>
                <h2 class="results-title" id="resultsTitle">¬°Incre√≠ble!</h2>
                <div class="results-score"><span id="finalScore">0</span> pts</div>
                <p class="results-message" id="resultsMessage">Has demostrado gran conocimiento sobre nuestras carreras.</p>

                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="correctCount">0</div>
                        <div class="stat-label">Correctas ‚úÖ</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="incorrectCount">0</div>
                        <div class="stat-label">Incorrectas ‚ùå</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="timeSpent">0:00</div>
                        <div class="stat-label">Tiempo ‚è±Ô∏è</div>
                    </div>
                </div>

                <div class="card" style="text-align: left; margin-top: 20px; background: linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(236, 72, 153, 0.1));">
                    <h3 style="font-size: 1rem; margin-bottom: 12px;">üéì Carreras que te esperan:</h3>
                    <p style="font-size: 0.9rem; color: var(--text-secondary); line-height: 1.7;">
                        <strong style="color: var(--blue);">Educaci√≥n B√°sica</strong> - Forma a las nuevas generaciones<br>
                        <strong style="color: var(--accent);">Educaci√≥n Inicial</strong> - Trabaja con los m√°s peque√±os<br>
                        <strong style="color: var(--pink);">Psicolog√≠a Educativa</strong> - Comprende la mente del estudiante
                    </p>
                </div>

                <button class="btn btn-primary" style="margin-top: 25px;" onclick="restartGame()">
                    üîÑ Jugar de Nuevo
                </button>
            </div>
        </section>
    </div>

    <script>
        // Preguntas de trivia - DIVERTIDAS Y GENERALES
        const allQuestions = [
            // EDUCACI√ìN B√ÅSICA - Divertidas
            {
                category: "basica",
                categoryName: "EDUCACI√ìN B√ÅSICA",
                question: "Si te encanta explicar las cosas de mil formas hasta que todos entiendan, ¬øqu√© carrera es para ti?",
                options: ["Astronauta", "Educaci√≥n B√°sica", "Chef", "Piloto"],
                correct: 1
            },
            {
                category: "basica",
                categoryName: "EDUCACI√ìN B√ÅSICA",
                question: "¬øCu√°l es el superpoder secreto de un maestro de primaria?",
                options: ["Volar", "Tener ojos en la espalda", "Invisibilidad", "Super fuerza"],
                correct: 1
            },
            {
                category: "basica",
                categoryName: "EDUCACI√ìN B√ÅSICA",
                question: "Un docente de educaci√≥n b√°sica trabaja principalmente con ni√±os de...",
                options: ["0 a 2 a√±os", "5 a 14 a√±os", "Adultos mayores", "Universitarios"],
                correct: 1
            },
            {
                category: "basica",
                categoryName: "EDUCACI√ìN B√ÅSICA",
                question: "¬øQu√© necesitas tener de sobra para ser maestro de primaria?",
                options: ["Dinero", "Paciencia y creatividad", "Un auto lujoso", "Fama"],
                correct: 1
            },
            {
                category: "basica",
                categoryName: "EDUCACI√ìN B√ÅSICA",
                question: "¬øCu√°l de estas frases dir√≠a un profe de b√°sica?",
                options: ["No me importa si no entienden", "¬°Vamos a aprender jugando!", "Solo lean el libro", "Eso no es mi problema"],
                correct: 1
            },
            {
                category: "basica",
                categoryName: "EDUCACI√ìN B√ÅSICA",
                question: "Si un ni√±o te pregunta '¬øPor qu√© el cielo es azul?' t√∫...",
                options: ["Lo ignoras", "Le explicas con emoci√≥n", "Dices 'no s√©'", "Cambias de tema"],
                correct: 1
            },
            {
                category: "basica",
                categoryName: "EDUCACI√ìN B√ÅSICA",
                question: "¬øQu√© hace especial a un maestro de educaci√≥n b√°sica?",
                options: ["Grita mucho", "Transforma vidas desde la infancia", "Solo da tareas", "Nunca sonr√≠e"],
                correct: 1
            },
            {
                category: "basica",
                categoryName: "EDUCACI√ìN B√ÅSICA",
                question: "El mejor maestro es el que...",
                options: ["Pone m√°s deberes", "Inspira a sus estudiantes", "Nunca juega", "Solo dicta"],
                correct: 1
            },

            // EDUCACI√ìN INICIAL - Divertidas
            {
                category: "inicial",
                categoryName: "EDUCACI√ìN INICIAL",
                question: "Si los beb√©s y ni√±os peque√±os te parecen adorables, ¬øqu√© carrera te llama?",
                options: ["Ingenier√≠a", "Educaci√≥n Inicial", "Derecho", "Contabilidad"],
                correct: 1
            },
            {
                category: "inicial",
                categoryName: "EDUCACI√ìN INICIAL",
                question: "¬øCu√°l es la herramienta m√°s poderosa en educaci√≥n inicial?",
                options: ["Una calculadora", "El juego y el amor", "Un microscopio", "Una computadora"],
                correct: 1
            },
            {
                category: "inicial",
                categoryName: "EDUCACI√ìN INICIAL",
                question: "Un profe de inicial debe ser experto en...",
                options: ["F√≠sica nuclear", "Canciones, cuentos y abrazos", "Programaci√≥n", "Leyes"],
                correct: 1
            },
            {
                category: "inicial",
                categoryName: "EDUCACI√ìN INICIAL",
                question: "¬øCon qu√© edad de ni√±os trabaja un docente de educaci√≥n inicial?",
                options: ["Adolescentes", "0 a 5 a√±os", "Adultos", "Ancianos"],
                correct: 1
            },
            {
                category: "inicial",
                categoryName: "EDUCACI√ìN INICIAL",
                question: "¬øQu√© encontrar√≠as en un aula de educaci√≥n inicial?",
                options: ["Tubos de ensayo", "Juguetes, colores y plastilina", "M√°quinas industriales", "Computadoras gaming"],
                correct: 1
            },
            {
                category: "inicial",
                categoryName: "EDUCACI√ìN INICIAL",
                question: "El lema de educaci√≥n inicial podr√≠a ser:",
                options: ["Prohibido jugar", "Aprender es una aventura m√°gica", "Solo estudiar", "Nada de diversi√≥n"],
                correct: 1
            },
            {
                category: "inicial",
                categoryName: "EDUCACI√ìN INICIAL",
                question: "¬øQu√© cualidad es ESENCIAL para trabajar con los m√°s peque√±os?",
                options: ["Ser muy serio", "Ternura y mucha energ√≠a", "Hablar dif√≠cil", "Ser estricto siempre"],
                correct: 1
            },
            {
                category: "inicial",
                categoryName: "EDUCACI√ìN INICIAL",
                question: "Si un ni√±o de 3 a√±os llora, t√∫ como docente de inicial...",
                options: ["Lo ignoras", "Lo abrazas y calmas con cari√±o", "Le gritas", "Lo dejas solo"],
                correct: 1
            },

            // PSICOLOG√çA EDUCATIVA - Divertidas
            {
                category: "psicologia",
                categoryName: "PSICOLOG√çA EDUCATIVA",
                question: "Si te fascina entender por qu√© la gente piensa y act√∫a como lo hace, ¬øqu√© carrera es para ti?",
                options: ["Mec√°nica", "Psicolog√≠a Educativa", "Cocina", "Agricultura"],
                correct: 1
            },
            {
                category: "psicologia",
                categoryName: "PSICOLOG√çA EDUCATIVA",
                question: "Un psic√≥logo educativo es como un...",
                options: ["Detective de la mente", "Cocinero", "Arquitecto de casas", "Mec√°nico de autos"],
                correct: 0
            },
            {
                category: "psicologia",
                categoryName: "PSICOLOG√çA EDUCATIVA",
                question: "¬øQu√© hace un psic√≥logo educativo cuando un estudiante tiene problemas para aprender?",
                options: ["Lo expulsa", "Busca entenderlo y ayudarlo", "Lo ignora", "Le pone m√°s tareas"],
                correct: 1
            },
            {
                category: "psicologia",
                categoryName: "PSICOLOG√çA EDUCATIVA",
                question: "Si tu amigo est√° triste y siempre sabes qu√© decirle, podr√≠as ser buen...",
                options: ["Contador", "Psic√≥logo educativo", "Ingeniero civil", "Qu√≠mico"],
                correct: 1
            },
            {
                category: "psicologia",
                categoryName: "PSICOLOG√çA EDUCATIVA",
                question: "¬øD√≥nde puede trabajar un psic√≥logo educativo?",
                options: ["Solo en hospitales", "Colegios, universidades y centros de apoyo", "Solo en f√°bricas", "En el espacio"],
                correct: 1
            },
            {
                category: "psicologia",
                categoryName: "PSICOLOG√çA EDUCATIVA",
                question: "La frase perfecta para un psic√≥logo educativo es:",
                options: ["No me importa c√≥mo te sientes", "Cu√©ntame, estoy aqu√≠ para ayudarte", "Eso no es mi asunto", "Arr√©glate solo"],
                correct: 1
            },
            {
                category: "psicologia",
                categoryName: "PSICOLOG√çA EDUCATIVA",
                question: "¬øQu√© superpoder tiene un psic√≥logo educativo?",
                options: ["Leer mentes (casi)", "Volar", "Ser invisible", "Super velocidad"],
                correct: 0
            },
            {
                category: "psicologia",
                categoryName: "PSICOLOG√çA EDUCATIVA",
                question: "Si siempre eres el consejero de tu grupo de amigos, podr√≠as estudiar...",
                options: ["Matem√°ticas puras", "Psicolog√≠a Educativa", "F√≠sica cu√°ntica", "Geolog√≠a"],
                correct: 1
            },

            // PREGUNTAS MIXTAS DIVERTIDAS
            {
                category: "basica",
                categoryName: "EDUCACI√ìN B√ÅSICA",
                question: "¬øCu√°ntas veces al d√≠a puede un maestro escuchar 'profe, profe, profe'?",
                options: ["10 veces", "50 veces", "¬°Infinitas! üòÑ", "Nunca"],
                correct: 2
            },
            {
                category: "inicial",
                categoryName: "EDUCACI√ìN INICIAL",
                question: "¬øQu√© canci√≥n conoce TODO maestro de inicial?",
                options: ["Heavy metal", "Los pollitos dicen", "√ìpera italiana", "Reggaet√≥n"],
                correct: 1
            },
            {
                category: "psicologia",
                categoryName: "PSICOLOG√çA EDUCATIVA",
                question: "¬øQu√© estudia la Psicolog√≠a Educativa?",
                options: ["Las estrellas", "C√≥mo aprendemos y nos desarrollamos", "Los volcanes", "La econom√≠a mundial"],
                correct: 1
            },
            {
                category: "basica",
                categoryName: "EDUCACI√ìN B√ÅSICA",
                question: "¬øPor qu√© es genial ser maestro?",
                options: ["Por el dinero", "Porque cambias el mundo, un ni√±o a la vez", "Por las vacaciones", "Por nada"],
                correct: 1
            },
            {
                category: "inicial",
                categoryName: "EDUCACI√ìN INICIAL",
                question: "¬øQu√© material NUNCA falta en educaci√≥n inicial?",
                options: ["Calculadoras cient√≠ficas", "Crayones y papel", "Microscopios", "Libros de universidad"],
                correct: 1
            },
            {
                category: "psicologia",
                categoryName: "PSICOLOG√çA EDUCATIVA",
                question: "Un psic√≥logo educativo ayuda a estudiantes que...",
                options: ["Solo sacan 10", "Tienen dificultades o necesitan orientaci√≥n", "No necesitan nada", "Ya son perfectos"],
                correct: 1
            }
        ];

        // State
        let studentData = {};
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let correctAnswers = 0;
        let incorrectAnswers = 0;
        let timeRemaining = 180; // 3 minutos
        let timerInterval = null;
        let gameStartTime = null;

        // Shuffle array
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // Start game
        function startGame() {
            // Validate form
            const nombres = document.getElementById('nombres');
            const institucion = document.getElementById('institucion');
            const celular = document.getElementById('celular');
            const email = document.getElementById('email');
            const consentimiento = document.getElementById('consentimiento');
            const consentError = document.getElementById('consent-error');

            let valid = true;

            document.querySelectorAll('.input-group').forEach(g => g.classList.remove('error'));
            consentError.style.display = 'none';

            if (!nombres.value.trim()) {
                nombres.parentElement.classList.add('error');
                valid = false;
            }

            if (!institucion.value.trim()) {
                institucion.parentElement.classList.add('error');
                valid = false;
            }

            if (!celular.value.trim() || !/^[0-9]{10}$/.test(celular.value.trim())) {
                celular.parentElement.classList.add('error');
                valid = false;
            }

            if (!email.value.trim() || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email.value.trim())) {
                email.parentElement.classList.add('error');
                valid = false;
            }

            if (!consentimiento.checked) {
                consentError.style.display = 'block';
                valid = false;
            }

            if (!valid) return;

            studentData = {
                nombres: nombres.value.trim(),
                institucion: institucion.value.trim(),
                celular: celular.value.trim(),
                email: email.value.trim()
            };

            // Initialize game
            currentQuestions = shuffleArray(allQuestions).slice(0, 10);
            currentQuestionIndex = 0;
            score = 0;
            correctAnswers = 0;
            incorrectAnswers = 0;
            timeRemaining = 180;
            gameStartTime = Date.now();

            document.getElementById('totalQ').textContent = currentQuestions.length;
            document.getElementById('score').textContent = '0';

            showSection('section-game');
            startTimer();
            showQuestion();
        }

        // Timer
        function startTimer() {
            updateTimerDisplay();
            timerInterval = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();

                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    endGame();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            const timeDisplay = document.getElementById('time');
            timeDisplay.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;

            const timerContainer = document.getElementById('timer');
            if (timeRemaining <= 30) {
                timerContainer.classList.add('warning');
            } else {
                timerContainer.classList.remove('warning');
            }
        }

        // Show question
        function showQuestion() {
            const question = currentQuestions[currentQuestionIndex];
            
            document.getElementById('currentQ').textContent = currentQuestionIndex + 1;
            document.getElementById('questionText').textContent = question.question;
            
            const categoryEl = document.getElementById('questionCategory');
            categoryEl.textContent = question.categoryName;
            categoryEl.className = 'question-category category-' + question.category;

            const optionsContainer = document.getElementById('optionsContainer');
            const letters = ['A', 'B', 'C', 'D'];
            
            // Shuffle options
            const shuffledOptions = question.options.map((opt, idx) => ({ text: opt, originalIndex: idx }));
            for (let i = shuffledOptions.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffledOptions[i], shuffledOptions[j]] = [shuffledOptions[j], shuffledOptions[i]];
            }

            optionsContainer.innerHTML = shuffledOptions.map((opt, idx) => `
                <button class="option-btn" onclick="selectAnswer(this, ${opt.originalIndex}, ${question.correct})">
                    <span class="option-letter">${letters[idx]}</span>
                    <span>${opt.text}</span>
                </button>
            `).join('');

            document.getElementById('feedback').className = 'feedback';
            document.getElementById('feedback').textContent = '';
        }

        // Select answer
        function selectAnswer(btn, selectedIndex, correctIndex) {
            const buttons = document.querySelectorAll('.option-btn');
            buttons.forEach(b => b.classList.add('disabled'));

            const feedback = document.getElementById('feedback');

            if (selectedIndex === correctIndex) {
                btn.classList.add('correct');
                score += 100;
                correctAnswers++;
                document.getElementById('score').textContent = score;
                feedback.textContent = '¬°Correcto! üéâ +100 puntos';
                feedback.className = 'feedback correct';
            } else {
                btn.classList.add('incorrect');
                incorrectAnswers++;
                // Show correct answer
                buttons.forEach(b => {
                    const bIndex = parseInt(b.getAttribute('onclick').match(/selectAnswer\(this, (\d+)/)[1]);
                    if (bIndex === correctIndex) {
                        b.classList.add('correct');
                    }
                });
                feedback.textContent = '¬°Ups! La respuesta correcta era otra üòÖ';
                feedback.className = 'feedback incorrect';
            }

            // Next question after delay
            setTimeout(() => {
                currentQuestionIndex++;
                if (currentQuestionIndex < currentQuestions.length) {
                    showQuestion();
                } else {
                    endGame();
                }
            }, 1500);
        }

        // End game
        function endGame() {
            clearInterval(timerInterval);
            
            const timeSpent = Math.floor((Date.now() - gameStartTime) / 1000);
            const minutes = Math.floor(timeSpent / 60);
            const seconds = timeSpent % 60;

            // Set results
            document.getElementById('finalScore').textContent = score;
            document.getElementById('correctCount').textContent = correctAnswers;
            document.getElementById('incorrectCount').textContent = incorrectAnswers;
            document.getElementById('timeSpent').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;

            // Set message based on score
            const percentage = (correctAnswers / currentQuestions.length) * 100;
            let icon, title, message;

            if (percentage >= 80) {
                icon = 'üèÜ';
                title = '¬°Excelente!';
                message = '¬°Eres un experto! Tienes gran conocimiento sobre nuestras carreras de educaci√≥n.';
            } else if (percentage >= 60) {
                icon = 'üåü';
                title = '¬°Muy bien!';
                message = 'Buen trabajo. Conoces bastante sobre las carreras de educaci√≥n.';
            } else if (percentage >= 40) {
                icon = 'üí™';
                title = '¬°Sigue as√≠!';
                message = 'Vas por buen camino. ¬°Te invitamos a conocer m√°s sobre nuestras carreras!';
            } else {
                icon = 'üìö';
                title = '¬°A aprender!';
                message = 'Esta es tu oportunidad de descubrir las incre√≠bles carreras que te esperan.';
            }

            document.getElementById('resultsIcon').textContent = icon;
            document.getElementById('resultsTitle').textContent = title;
            document.getElementById('resultsMessage').textContent = message;

            showSection('section-results');
            launchConfetti();
            submitResults(timeSpent);
        }

        // Submit results
        function submitResults(timeSpent) {
            const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwfw2PT3KhPV0X_ras9uss5GsmcikBZfdu_GOgZtpZeI9bv1-nE6JMcWV9-KaVKNuDZxw/exec';

            // Remove existing iframe/form
            const oldIframe = document.getElementById('hidden_iframe_submit');
            if (oldIframe) oldIframe.remove();
            const oldForm = document.getElementById('hidden_form_submit');
            if (oldForm) oldForm.remove();

            // Create hidden iframe
            const iframe = document.createElement('iframe');
            iframe.id = 'hidden_iframe_submit';
            iframe.name = 'hidden_iframe_submit';
            iframe.style.display = 'none';
            document.body.appendChild(iframe);

            // Create form
            const form = document.createElement('form');
            form.id = 'hidden_form_submit';
            form.method = 'GET';
            form.action = GOOGLE_SCRIPT_URL;
            form.target = 'hidden_iframe_submit';
            form.style.display = 'none';

            // Data to send
            const datos = {
                nombres: studentData.nombres,
                institucion: studentData.institucion,
                celular: studentData.celular,
                email: studentData.email,
                area1: score,
                area2: correctAnswers,
                area3: incorrectAnswers,
                area4: timeSpent,
                area5: currentQuestions.length,
                carrera: 'Trivia Educativa - Puntaje: ' + score
            };

            // Create hidden inputs
            for (const [key, value] of Object.entries(datos)) {
                const input = document.createElement('input');
                input.type = 'hidden';
                input.name = key;
                input.value = value;
                form.appendChild(input);
            }

            document.body.appendChild(form);
            form.submit();

            // Clean up after delay
            setTimeout(() => {
                iframe.remove();
                form.remove();
            }, 3000);
        }

        // Show section
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Restart game
        function restartGame() {
            document.getElementById('nombres').value = '';
            document.getElementById('institucion').value = '';
            document.getElementById('celular').value = '';
            document.getElementById('email').value = '';
            document.getElementById('consentimiento').checked = false;
            
            showSection('section-data');
        }

        // Confetti
        function launchConfetti() {
            const canvas = document.getElementById('confetti-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const confetti = [];
            const colors = ['#f59e0b', '#ec4899', '#8b5cf6', '#3b82f6', '#10b981'];

            for (let i = 0; i < 150; i++) {
                confetti.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    r: Math.random() * 6 + 4,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    speed: Math.random() * 3 + 2,
                    angle: Math.random() * Math.PI * 2,
                    spin: Math.random() * 0.2 - 0.1
                });
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                let active = false;
                confetti.forEach(c => {
                    if (c.y < canvas.height + 20) {
                        active = true;
                        c.y += c.speed;
                        c.x += Math.sin(c.angle) * 2;
                        c.angle += c.spin;

                        ctx.beginPath();
                        ctx.fillStyle = c.color;
                        ctx.fillRect(c.x, c.y, c.r, c.r * 1.5);
                    }
                });

                if (active) {
                    requestAnimationFrame(animate);
                } else {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                }
            }

            animate();
        }
    </script>
</body>
</html>
